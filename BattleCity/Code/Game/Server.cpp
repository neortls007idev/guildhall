#include "Game/Server.hpp"

#include "Engine/Core/StdExtensions.hpp"
#include "Game/GameSinglePlayer.hpp"
#include "Game/GameMultiPlayer.hpp"

//--------------------------------------------------------------------------------------------------------------------------------------------

Server* g_theServer = nullptr;

//--------------------------------------------------------------------------------------------------------------------------------------------

Server::Server()				
{
	
}

//--------------------------------------------------------------------------------------------------------------------------------------------

Server::~Server()
{
	SAFE_RELEASE_POINTER( m_singlePlayerGame );
	SAFE_RELEASE_POINTER( m_multiPlayerGame );
	
	for ( auto index : m_clients )
	{
		index = nullptr;
	}
}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::Startup()
{

}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::Shutdown()
{

}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::BeginFrame()
{

}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::Update( float deltaSeconds )
{

}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::EndFrame()
{

}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::CreateSinglePlayerGame()
{
	m_singlePlayerGame = new GameSinglePlayer();
	m_gameType = SINGLE_PLAYER;
}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::CreateMultiPlayerGame()
{
	m_multiPlayerGame = new GameMultiplayer();
	m_gameType = MULTIPLAYER;
}

//--------------------------------------------------------------------------------------------------------------------------------------------

void Server::AddPlayerClientToServer( Client* client )
{
	EmplaceBackAtEmptySpace( m_clients , client );
}

//--------------------------------------------------------------------------------------------------------------------------------------------

bool Server::RemovePlayerClientFromServer( Client* client )
{
	for( int index = 0 ; index < m_clients.size(); index++ )
	{
		if( m_clients[ index ] == nullptr )
		{
			continue;
		}

		if( m_clients[ index ] == client )
		{
			m_clients[ index ] = nullptr;
			return true;
		}
	}

	return false;
}

//--------------------------------------------------------------------------------------------------------------------------------------------